<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Ajax 1 - 请求纯文本数据</title>
</head>
<body>
	<button id="button">请求纯文本</button>
	<br><br>
	<div id="text"></div>	
</body>
<script>
	// 监听button对象
	document.getElementById('button').addEventListener('click',loadText);

	// 实现loadText
	function loadText(){
		// Asynchronous JavaScript And XML 简称AJAX，是一种异步交互网页开发技术
		// axios Fetch API prototype NODE  API jQuery
		// XMLHttpRequest 连接客户端与服务器端的交互

		// 1实例化xhr 对象
		var xhr = new XMLHttpRequest();
        console.log(xhr.readyState)

        // 2配置对象信息 三个参数 type url/file asyn(是否异步) 默认true，为异步
        xhr.open("GET","sample.txt",true); 
        console.log(xhr.readyState)

         // 3执行处理数据的方法
         /*xhr.onload = function(){
            // console.log(xhr.readyState);
            if(this.status == 200){
            	console.log(this.responseText);
            }	
         } */
         // 在没有进入页面之前 对用户进行引导
         xhr.onprogress = function(){
         	console.log("加载页面"+this.readyState)
         }
         xhr.onreadystatechange = function(){
         	 if(this.readyState == 4&&this.status==200){
         	 	// console.log(this.responseText);
         	 	document.getElementById('text').innerHTML = this.responseText;
         	 } 	
         }

         // 4发送请求
         xhr.send();

        /*
        200:"ok"
        404:"页面未找到"
        0: 请求未初始化
		1: 服务器连接已建立
		2: 请求已接收
		3: 请求处理中
		4: 请求已完成，且响应已就绪
		*/
	}
</script>
</html>